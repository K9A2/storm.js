<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>文章内容</title>
    <link rel="SHORTCUT ICON" href="./img/icon.jpg">
    <link rel="stylesheet" href="css/github.css"/>
    <link href="css/prettify.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link href="css/content.css" rel="stylesheet">
    <script src="./js/jquery.min.js"></script>
    <script src="js/marked.js"></script>
    <script src="js/storm.js"></script>
    <script>
        var postName = getParaValue("name");
        var post = getPostByName(postName);
        $("#title").html("Hello world!");
        //获取并渲染写入文章正文
        $.get("./md/" + postName + ".md").success(function (content) {
            $(".markdown-body").append(marked(content));
            $("pre").addClass("prettyprint linenums");
            $("title").html($("h1").html());
            // 用以去除写作 Markdown 文档中自然留下的一级标题
            var header = $("#content").find("h1");
            header.remove();
            getTOC("toc");
        }).error(RedirectTo404);
    </script>
</head>
<body>

<div id="nav">
    <script>
        getNavBar();
    </script>
</div>

<div id="title">
    <div class="container">
        <script>
            var header = $("<h1></h1>", {
                text: post.title
            });
            var date = $("<p></p>", {
                text: "日期：" + post.date
            });
            var tagList = $("<div></div>", {
                text: "标签：",
                id: "tags"
            });
            for (var i = 0; i < post.tag.length; i++) {
                var tagLink = $("<a></a>", {
                    text: post.tag[i],
                    href: "./tag.html?tag=" + post.tag[i]
                });
                tagLink.appendTo(tagList);
            }
            var container = $("div#title .container");
            container.append(header);
            container.append(date);
            container.append(tagList);
        </script>
    </div>
</div>

<div class="container postContainer">
    <div class="leftCol">
        <div id="toc"></div>
    </div>
    <div class="rightCol">
        <div id="deprecated">
            <span>本文章已经发表超过一年，其中部分内容可能已过时，请注意</span>
            <script>
                var original = new Date(post.date);
                var current = new Date();
                var diff = Math.floor((current.getTime() - original.getTime()) / (24 * 3600 * 1000));
                if (diff <= 365) {
                    $("#deprecated").hide();
                }
                $("#main").css("margin", "1rem 0 2rem 0");
            </script>
        </div>
        <div id="main">
            <div id="content">
                <article class="markdown-body"></article>
            </div>
        </div>
    </div>
</div>

<div id='toTop' title="返回顶部">
    <div class="arrow"></div>
    <div class="stick"></div>
</div>

<!--代码高亮-->
<script src="js/run_prettify.js?lang=css&amp;skin=default"></script>

<script>
    getFooter();
</script>

<script>

</script>

</body>

</html>