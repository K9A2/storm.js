<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>首页</title>
    <link rel="SHORTCUT ICON" href="./img/icon.jpg">
    <script src="./js/jquery.min.js">
    </script>
    <link rel="stylesheet" href="css/github.css"/>
    <script src="js/marked.js"></script>
    <link href="css/prettify.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">

    <!--
        todo: 增加自动获取 ./md 文件夹下的 markdown 文件列表功能
        todo: 增加移动适配功能
        todo: 增加分类列表功能，样式类似于博客园：http://www.cnblogs.com/lwbqqyumidi/p/3804883.html
        todo: 调整首页样式，类似于：http://www.cnblogs.com/wxd0108/
        todo: 使用xml文件来管理各种字符串
        todo: 使用最新版 jQuery 进行改写
    -->

</head>
<body>

<script>
    var title;
    var motto;

    //Get blog title and motto from config.xml, and set the header for this page.
    $.ajax({
        url: "./config.xml",
        dataType: "xml",
        type: "GET",
        error: function (xml) {
            alert("Unable to reach the config file.");
        },
        success: function (xml) {
            $(xml).find("config").each(function (i) {
                title = "<h1>" + $(this).children("title").text() + "</h1>";
                motto = "<p>" + $(this).children("motto").text() + "</p>";
                $(".markdown-body").append(title + motto);
                //todo: note it, the usage of find() and each().
//                var item = $(this).find("category").find("category-item").children("item-text").text();
//                alert(item + i);
            })
        }
    });

    //Set the categories
    $.ajax({
        url: "./config.xml",
        dataType: "xml",
        type: "GET",
        error: function (xml) {
            alert("Unable to reach the config file.");
        },
        success: function (xml) {
            //todo: note it, how to get an array for category
            var categories = $(xml).find("category-item");
            alert();
//            $(xml).find("category-item").each(function () {
//                alert($(this).children("item-text").text());
//            })
//            alert(categories);
//            for (var category in categories) {
//                alert(category);
//            }
        }
    });

    //Read the index markdown file
    $.get("./md/index.md").success(function (content) {
        $(".markdown-body").append(marked(content));
        $("pre").addClass("prettyprint linenums");
        $("title").html($("h1").html());
        $("a").attr("target", "_blank");
    });
</script>

<!-- Converted markdown text -->
<article class="markdown-body">

</article>

</body>
</html>